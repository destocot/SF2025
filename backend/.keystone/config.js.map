{
  "version": 3,
  "sources": ["../keystone.ts"],
  "sourcesContent": ["import \"dotenv/config\";\nimport { config, list } from \"@keystone-6/core\";\nimport { text, password, select, integer } from \"@keystone-6/core/fields\";\nimport { allowAll } from \"@keystone-6/core/access\";\nimport { createAuth } from \"@keystone-6/auth\";\nimport { statelessSessions } from \"@keystone-6/core/session\";\n\nconst session = statelessSessions({\n  maxAge: 60 * 60 * 24 * 30,\n  secret: process.env.COOKIE_SECRET,\n});\n\nconst { withAuth } = createAuth({\n  listKey: \"User\",\n  identityField: \"email\",\n  secretField: \"password\",\n  sessionData: `id name email`,\n  initFirstItem: {\n    fields: [\"name\", \"email\", \"password\"],\n  },\n});\n\nconst lists = {\n  User: list({\n    access: allowAll,\n    fields: {\n      name: text({ validation: { isRequired: true } }),\n      email: text({\n        validation: { isRequired: true },\n        isIndexed: \"unique\",\n      }),\n      password: password(),\n    },\n  }),\n  Product: list({\n    access: allowAll,\n    fields: {\n      name: text({ validation: { isRequired: true } }),\n      description: text({\n        ui: {\n          displayMode: \"textarea\",\n        },\n      }),\n      status: select({\n        options: [\n          { label: \"Draft\", value: \"DRAFT\" },\n          { label: \"Available\", value: \"AVAILABLE\" },\n          { label: \"Unavailable\", value: \"UNAVAILABLE\" },\n        ],\n        defaultValue: \"DRAFT\",\n        ui: {\n          displayMode: \"segmented-control\",\n          createView: { fieldMode: \"hidden\" },\n        },\n      }),\n      price: integer(),\n      // photo\n    },\n  }),\n};\n\nexport default config(\n  withAuth({\n    db: {\n      provider: \"sqlite\",\n      url: `${process.env.DATABASE_URL}`,\n    },\n    server: {\n      cors: { origin: [process.env.FRONTEND_URL], credentials: true },\n    },\n    lists,\n    session,\n    ui: {\n      isAccessAllowed: (ctx) => !!ctx.session?.data,\n    },\n  })\n);\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAO;AACP,kBAA6B;AAC7B,oBAAgD;AAChD,oBAAyB;AACzB,kBAA2B;AAC3B,qBAAkC;AAElC,IAAM,cAAU,kCAAkB;AAAA,EAChC,QAAQ,KAAK,KAAK,KAAK;AAAA,EACvB,QAAQ,QAAQ,IAAI;AACtB,CAAC;AAED,IAAM,EAAE,SAAS,QAAI,wBAAW;AAAA,EAC9B,SAAS;AAAA,EACT,eAAe;AAAA,EACf,aAAa;AAAA,EACb,aAAa;AAAA,EACb,eAAe;AAAA,IACb,QAAQ,CAAC,QAAQ,SAAS,UAAU;AAAA,EACtC;AACF,CAAC;AAED,IAAM,QAAQ;AAAA,EACZ,UAAM,kBAAK;AAAA,IACT,QAAQ;AAAA,IACR,QAAQ;AAAA,MACN,UAAM,oBAAK,EAAE,YAAY,EAAE,YAAY,KAAK,EAAE,CAAC;AAAA,MAC/C,WAAO,oBAAK;AAAA,QACV,YAAY,EAAE,YAAY,KAAK;AAAA,QAC/B,WAAW;AAAA,MACb,CAAC;AAAA,MACD,cAAU,wBAAS;AAAA,IACrB;AAAA,EACF,CAAC;AAAA,EACD,aAAS,kBAAK;AAAA,IACZ,QAAQ;AAAA,IACR,QAAQ;AAAA,MACN,UAAM,oBAAK,EAAE,YAAY,EAAE,YAAY,KAAK,EAAE,CAAC;AAAA,MAC/C,iBAAa,oBAAK;AAAA,QAChB,IAAI;AAAA,UACF,aAAa;AAAA,QACf;AAAA,MACF,CAAC;AAAA,MACD,YAAQ,sBAAO;AAAA,QACb,SAAS;AAAA,UACP,EAAE,OAAO,SAAS,OAAO,QAAQ;AAAA,UACjC,EAAE,OAAO,aAAa,OAAO,YAAY;AAAA,UACzC,EAAE,OAAO,eAAe,OAAO,cAAc;AAAA,QAC/C;AAAA,QACA,cAAc;AAAA,QACd,IAAI;AAAA,UACF,aAAa;AAAA,UACb,YAAY,EAAE,WAAW,SAAS;AAAA,QACpC;AAAA,MACF,CAAC;AAAA,MACD,WAAO,uBAAQ;AAAA;AAAA,IAEjB;AAAA,EACF,CAAC;AACH;AAEA,IAAO,uBAAQ;AAAA,EACb,SAAS;AAAA,IACP,IAAI;AAAA,MACF,UAAU;AAAA,MACV,KAAK,GAAG,QAAQ,IAAI,YAAY;AAAA,IAClC;AAAA,IACA,QAAQ;AAAA,MACN,MAAM,EAAE,QAAQ,CAAC,QAAQ,IAAI,YAAY,GAAG,aAAa,KAAK;AAAA,IAChE;AAAA,IACA;AAAA,IACA;AAAA,IACA,IAAI;AAAA,MACF,iBAAiB,CAAC,QAAQ,CAAC,CAAC,IAAI,SAAS;AAAA,IAC3C;AAAA,EACF,CAAC;AACH;",
  "names": []
}
